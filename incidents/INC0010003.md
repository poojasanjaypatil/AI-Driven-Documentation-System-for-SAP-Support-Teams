# Incident Documentation

**Incident Number:** `INC0010003`

**Title:** Custom RFC ZHR_GET_EMP_DATA returning incomplete employee records

> **Category:** Inquiry / Help • **Reported By:** TEACH-005
> **Opened At:** 2025-10-13 00:53:12 • **Resolved At:** 12.01.2026 15:07:59

---

## Metadata

| Field | Value |
|---|---|
| Category | Inquiry / Help |
| Reported By | TEACH-005 |
| Opened At | 2025-10-13 00:53:12 |
| Resolved At | 12.01.2026 15:07:59 |
| sys_id | b7dba53d53203210f1f6f7e0a0490e5e |

---

## Issue

- [2025-10-13 00:53:34] admin: RFC call from SuccessFactors integration is only retrieving partial data for some employee groups. Suspected filtering logic issue in ABAP SELECT statement. Need ABAP developer to review and adjust the query.

---

## Root Cause

The custom RFC ZHR_GET_EMP_DATA, used by the SAP–SuccessFactors integration, is returning incomplete employee records. The issue occurs for specific employee groups and subgroups, where expected personnel data (such as organizational assignment and employment details) is missing from the RFC output.

Initial analysis indicates that the RFC selection logic applies restrictive AND/OR conditions on employee group and subgroup fields, causing valid employee records to be excluded from the result set. The issue is reproducible and impacts downstream integrations that rely on the full employee dataset from SAP HCM.

---

## Solution Steps

The selection logic was corrected by expanding the allowed employee groups/subgroups, fixing the AND/OR conditions, and replacing the hard-coded validity check with a proper date-range filter. The query filters were moved to configuration (TVARVC/custom table), and the RFC was retested via SE37 and the SuccessFactors integration to confirm that all relevant employees are now returned.

---

## Additional Notes

- Generated via SAP ? ServiceNow ? (AI) ? GitHub pipeline.
