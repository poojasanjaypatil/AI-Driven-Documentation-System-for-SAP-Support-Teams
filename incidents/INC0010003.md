# Incident Documentation

**Incident Number:** `INC0010003`

**Title:** Custom RFC ZHR_GET_EMP_DATA returning incomplete employee records

> **Category:** Inquiry / Help • **Reported By:** TEACH-005
> **Opened At:** 2025-10-13 00:53:12 • **Resolved At:** 03.12.2025 14:39:48

---

## Metadata

| Field | Value |
|---|---|
| Category | Inquiry / Help |
| Reported By | TEACH-005 |
| Opened At | 2025-10-13 00:53:12 |
| Resolved At | 03.12.2025 14:39:48 |
| sys_id | b7dba53d53203210f1f6f7e0a0490e5e |

---

## Issue

- [2025-10-13 00:53:34] admin: RFC call from SuccessFactors integration is only retrieving partial data for some employee groups. Suspected filtering logic issue in ABAP SELECT statement. Need ABAP developer to review and adjust the query.

---

## Root Cause

The issue was caused by overly restrictive filtering logic in the custom RFC ZHR_GET_EMP_DATA. The ABAP SELECT statement hard-coded specific employee groups/subgroups and used incorrect logical conditions, which excluded several valid employee categories used by SuccessFactors. Additionally, a strict validity check (ENDDA = '99991231') filtered out employees with non-standard contract end dates, resulting in incomplete datasets.

---

## Solution Steps

The selection logic was corrected by expanding the allowed employee groups/subgroups, fixing the AND/OR conditions, and replacing the hard-coded validity check with a proper date-range filter. The query filters were moved to configuration (TVARVC/custom table), and the RFC was retested via SE37 and the SuccessFactors integration to confirm that all relevant employees are now returned.

---

## Additional Notes

- Generated via SAP ? ServiceNow ? (AI) ? GitHub pipeline.
